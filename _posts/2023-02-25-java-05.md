---
title: "[1주차] JVM은 무엇이며 자바 코드는 어떻게 실행하는 것인가"
excerpt: "기본기를 쌓기위한 JAVA 공부"

categories:
  - Java
tags:
  - [Java]

permalink: /category/java/5

toc: true
toc_sticky: true

date: 2023-02-25
last_modified_at: 2023-02-25
---
## 🦥 JVM
- Java 애플리케이션을 실행하기 위한 것
- Java 애플리케이션이 OS 에 상관없이 어디에서나 실행될 수 있도록 도와준다
- JAVA 애플리케이션을 클래스 로더를 통해 읽어 자바 API 와 실행하는 것
- 메모리 관리인 가비지 컬렉션을 수행

## 🦥 Java 컴파일 과정
1. 코드 작성(.java)
2. Java 컴파일러(javac) 가 .java 를 컴파일
3. 컴파일 완료된 자바 바이트 코드(.class)를 JVM의 클래스 로더로 전달
4. 클래스 로더는 `동적로딩` 을 통해 필요한 클래스를 로딩 및 링크 후 런타임 데이터 영역에 할당
5. 실행 엔진은 JVM 메모리에 올라온 바이트 코드들을 명령어 단위로 가져와 실행

## 🦥 Java 컴파일 및 실행 방법
### 🌿 Java 파일 작성 (HelloWorld.java)
```
class HelloWorld {
  public static void main(String[] args) {
    System.out.println("Hello World!");
  }
}
```
### 🌿 Java 컴파일 (javac)
```
javac HelloWorld.java // 컴파일
ls | grep "HelloWorld" // 컴파일 된 파일 찾기
```

### 🌿 컴파일 된 파일 실행
```
java HelloWorld
```

## 🦥 바이트 코드란
- 컴퓨터가 이해할 수 있는 언어로 변환된 코드
- 가상머신이 이해할 수 있는 중간 코드로 컴파일한 것
- 명령어 코드가 1바이트라 바이트 코드라고 부름

## 🦥 JIT 컴파일러
- 실행 엔진은 클래스 로더를 통해 런타임 데이터 영역에 올라온 `바이트 코드를(.class) 명령어 단위로 읽어서 실행`한다. 바이트 코드 실행 방법은 `인터프리터` 방식과 `JIT 컴파일러` 두가지 방식이 있고 이를 번갈아가면서 실행한다. 

### 🌿 인터프리터 방식
- 바이트 코드 명령어를 하나씩 읽어서 해석하고 실행
- 중복되는 코드라도 해석하고 실행해야 함

### 🌿 JIT 컴파일러
- 인터프리터 방식으로 실행하다 적절한 시점에 바이트 코드 전체를 컴파일하여 `기계어` 로 변경하고 더이상 인터프리터로 실행하지 않고 기계어로 직접 실행하는 방식
- 기계어는 캐시에 보관
- 한번만 실행되는 코드는 인터프리터 방식으로 실행하는 것이 유리
- 메서드가 얼마나 자주 사용되는지 체크 후 일정 정도 이상이라면 컴파일을 수행

## 🦥 JVM 구성요소
<img src="https://imgur.com/yHT8FjE.png">

### 🌿 클래스 로더
- JVM 으로 컴파일 된 클래스 파일을 로드하여 링크를 통해 Runtime Data 영역에 배치하는 모듈

### 🌿 실행 엔진
- 클래스 로더를 통해 Runtime Data 영역에 배치된 바이트 코드를 명령어 단위로 읽어서 실행
- 바이트 코드를 기계어로 변환

### 🌿 Runtime Data Area
- 자바 프로그램을 수행하기 위해 OS 에서 할당받은 메모리 공간

### 🌿 가비지 컬렉터
- Heap 영역에서 더이상 사용되지 않는 객체나 배열을 메모리에서 삭제하는 것

## 🦥 JDK 와 JRE
### 🌿 JDK
- Java 개발을 위한 SDK
- JDK 는 JRE 를 포함한다
- 자바 프로그램을 생성, 실행, 컴파일을 할 수 있다

### 🌿 JRE
- Java 를 실행하는데 필요한 패키지